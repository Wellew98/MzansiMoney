<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MzansiMoney - TaxWise Navigator</title>
    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
    <!-- React CDNs -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        h1, h2, h3 {
            font-family: 'Poppins', sans-serif;
        }
        /* Custom Colors */
        .bg-deep-purple { background-color: #4A148C; }
        .text-deep-purple { color: #4A148C; }
        .bg-gold { background-color: #FFD700; }
        .text-gold { color: #FFD700; }
        .bg-green { background-color: #2E7D32; }
        .text-green { color: #2E7D32; }
        .border-green { border-color: #2E7D32; }
        .bg-charcoal { background-color: #212121; }
        .bg-charcoal-light { background-color: #333333; }
        .text-light-gray { color: #E0E0E0; }
        /* Light Mode */
        body { background-color: #F5F5F5; }
        /* Dark Mode */
        body.dark {
            background-color: #212121;
        }
        body.dark .text-gray-600 { color: #E0E0E0; }
        body.dark .text-gray-800 { color: #E0E0E0; }
        body.dark .bg-white { background-color: #333333; }
        body.dark .text-deep-purple { color: #FFD700; }
        body.dark canvas { background-color: #333333; }
        /* Hover Effects */
        .hover\:text-gold:hover { color: #FFD700; }
        .hover\:bg-gold:hover { background-color: #FFD700; color: #FFFFFF; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        var _React = React;
        var useState = _React.useState;
        var useEffect = _React.useEffect;

        function TaxCalculator() {
            var darkModeState = useState(true); // Default to dark mode
            var darkMode = darkModeState[0];
            var setDarkMode = darkModeState[1];

            var taxDataState = useState({
                monthlySalary: '',
                travelAllowance: '',
                housingAllowance: '',
                employerMedical: '',
                otherIncome: '',
                pension: '',
                provident: '',
                retirementAnnuity: '',
                dependents: '',
                employeeMedical: '',
                medicalExpenses: '',
                donations: '',
                workFromHome: false,
                claimTravel: false,
                purchasePrice: '',
                sellingPrice: '',
                allowableExpenses: '',
                ageRange: 'under65'
            });
            var taxData = taxDataState[0];
            var setTaxData = taxDataState[1];

            var showResultsState = useState(false);
            var showResults = showResultsState[0];
            var setShowResults = showResultsState[1];

            var chartRef = React.useRef(null);
            var chartInstance = React.useRef(null);

            useEffect(function() {
                if (darkMode) {
                    document.body.classList.add('dark');
                } else {
                    document.body.classList.remove('dark');
                }
            }, [darkMode]);

            useEffect(function() {
                if (showResults && chartRef.current) {
                    if (chartInstance.current) {
                        chartInstance.current.destroy();
                    }
                    var ctx = chartRef.current.getContext('2d');
                    chartInstance.current = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: [
                                'Total Income',
                                'Taxable Income',
                                'Tax Before Rebates',
                                'Rebates',
                                'Medical Credits',
                                showResults.homeOfficeDeduction > 0 ? 'Home Office Deduction' : null,
                                showResults.travelDeduction > 0 ? 'Travel Deduction' : null,
                                showResults.taxableCapitalGain > 0 ? 'Capital Gains Tax' : null,
                                'Final Tax'
                            ].filter(label => label),
                            datasets: [{
                                label: 'Tax Breakdown (ZAR)',
                                data: [
                                    showResults.totalIncome,
                                    showResults.taxableIncome,
                                    showResults.taxBeforeRebates,
                                    showResults.totalRebate,
                                    showResults.medicalCredit,
                                    showResults.homeOfficeDeduction > 0 ? showResults.homeOfficeDeduction : null,
                                    showResults.travelDeduction > 0 ? showResults.travelDeduction : null,
                                    showResults.taxableCapitalGain > 0 ? showResults.capitalGainsTax : null,
                                    showResults.finalTax
                                ].filter(data => data !== null),
                                backgroundColor: [
                                    '#808080', // Income (gray)
                                    '#808080', // Taxable Income
                                    '#4A148C', // Tax Before (Deep Purple)
                                    '#FFD700', // Rebates (Gold)
                                    '#2E7D32', // Credits (Green)
                                    '#2E7D32', // Home Office
                                    '#2E7D32', // Travel
                                    '#4A148C', // Capital Gains
                                    '#4A148C'  // Final Tax
                                ].slice(0, showResults.taxableCapitalGain > 0 ? 9 : showResults.homeOfficeDeduction > 0 || showResults.travelDeduction > 0 ? 7 : 5)
                            }]
                        },
                        options: {
                            indexAxis: 'y',
                            scales: {
                                x: {
                                    beginAtZero: true,
                                    title: { display: true, text: 'Amount (ZAR)', color: darkMode ? '#E0E0E0' : '#000000' },
                                    ticks: { color: darkMode ? '#E0E0E0' : '#000000' }
                                },
                                y: {
                                    ticks: { color: darkMode ? '#E0E0E0' : '#000000' }
                                }
                            },
                            plugins: {
                                legend: { display: false },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return context.dataset.label + ': R ' + context.parsed.x.toFixed(2);
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
                return function() {
                    if (chartInstance.current) {
                        chartInstance.current.destroy();
                    }
                };
            }, [showResults, darkMode]);

            function calculateTax() {
                // Income
                var monthlySalary = parseFloat(taxData.monthlySalary) || 0;
                var travelAllowance = parseFloat(taxData.travelAllowance) || 0;
                var housingAllowance = parseFloat(taxData.housingAllowance) || 0;
                var employerMedical = parseFloat(taxData.employerMedical) || 0;
                var otherIncome = parseFloat(taxData.otherIncome) || 0;
                var totalIncome = (monthlySalary * 12) + travelAllowance + housingAllowance + employerMedical + otherIncome;

                // Deductions
                var pension = parseFloat(taxData.pension) || 0;
                var provident = parseFloat(taxData.provident) || 0;
                var retirementAnnuity = parseFloat(taxData.retirementAnnuity) || 0;
                var donations = parseFloat(taxData.donations) || 0;
                var workFromHome = taxData.workFromHome;
                var claimTravel = taxData.claimTravel;

                var retirementTotal = pension + provident + retirementAnnuity;
                var maxRetirementDeduction = Math.min(retirementTotal, totalIncome * 0.275, 350000);
                var maxDonationsDeduction = Math.min(donations, totalIncome * 0.1);
                var homeOfficeDeduction = workFromHome ? totalIncome * 0.1 : 0; // 10% placeholder
                var travelDeduction = claimTravel ? totalIncome * 0.05 : 0; // 5% placeholder

                // Capital Gains
                var purchasePrice = parseFloat(taxData.purchasePrice) || 0;
                var sellingPrice = parseFloat(taxData.sellingPrice) || 0;
                var allowableExpenses = parseFloat(taxData.allowableExpenses) || 0;
                var capitalGain = sellingPrice - purchasePrice - allowableExpenses;
                var taxableCapitalGain = Math.max(0, capitalGain - 40000) * 0.4; // 40% inclusion, R40,000 exclusion

                // Taxable Income
                var taxableIncome = Math.max(0, totalIncome - maxRetirementDeduction - maxDonationsDeduction - homeOfficeDeduction - travelDeduction) + taxableCapitalGain;

                // SARS 2025/26 Tax Brackets (projected)
                var tax = 0;
                if (taxableIncome > 1904300) {
                    tax = 675054 + (taxableIncome - 1904300) * 0.45;
                } else if (taxableIncome > 717100) {
                    tax = 211260 + (taxableIncome - 717100) * 0.41;
                } else if (taxableIncome > 536700) {
                    tax = 136157 + (taxableIncome - 536700) * 0.36;
                } else if (taxableIncome > 388100) {
                    tax = 81161 + (taxableIncome - 388100) * 0.31;
                } else if (taxableIncome > 248500) {
                    tax = 44726 + (taxableIncome - 248500) * 0.26;
                } else if (taxableIncome > 0) {
                    tax = taxableIncome * 0.18;
                }

                // Rebates
                var primaryRebate = 18063;
                var secondaryRebate = taxData.ageRange !== 'under65' ? 9900 : 0;
                var tertiaryRebate = taxData.ageRange === '75plus' ? 3294 : 0;
                var totalRebate = primaryRebate + secondaryRebate + tertiaryRebate;

                // Medical Credits
                var dependents = parseInt(taxData.dependents) || 0;
                var employeeMedical = parseFloat(taxData.employeeMedical) || 0;
                var medicalExpenses = parseFloat(taxData.medicalExpenses) || 0;
                var medicalCredit = 0;
                if (dependents >= 2) {
                    medicalCredit = (364 * 2 + 246 * (dependents - 2)) * 12;
                } else if (dependents === 1) {
                    medicalCredit = 364 * 12;
                }
                medicalCredit += employeeMedical + medicalExpenses; // Simplified

                // Final Tax
                var taxBeforeRebates = tax;
                tax = Math.max(0, tax - totalRebate);
                var finalTax = Math.max(0, tax - medicalCredit);
                var capitalGainsTax = taxableCapitalGain > 0 ? (finalTax - Math.max(0, taxBeforeRebates - totalRebate - medicalCredit)) : 0;
                var effectiveTaxRate = taxableIncome > 0 ? (finalTax / taxableIncome * 100).toFixed(2) : 0;

                // Threshold
                var threshold = 0;
                if (taxData.ageRange === 'under65') {
                    threshold = 100350;
                } else if (taxData.ageRange === '65to74') {
                    threshold = 155100;
                } else {
                    threshold = 173600;
                }

                setShowResults({
                    totalIncome: totalIncome,
                    taxableNamibianIncome: taxableNamibianIncome,
                    taxableIncome: taxableIncome,
                    taxBeforeRebates: taxBeforeRebates,
                    totalRebate: totalRebate,
                    medicalCredit: medicalCredit,
                    finalTax: finalTax,
                    capitalGainsTax: capitalGainsTax,
                    effectiveTaxRate: effectiveTaxRate,
                    threshold: threshold,
                    taxableCapitalGain: taxableCapitalGain,
                    homeOfficeDeduction: homeOfficeDeduction,
                    travelDeduction: travelDeduction
                });
            }

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <header className="sticky top-0 z-50 bg-deep-purple shadow-md">
                        <nav className="container mx-auto px-4 py-4 flex justify-between items-center">
                            <div className="text-2xl font-bold text-white">
                                <a href="/index.html">MzansiMoney</a>
                            </div>
                            <div className="space-x-6 flex items-center">
                                <a href="/index.html#home" className="text-gold hover:text-white">Home</a>
                                <a href="/income-tax.html" className="text-gold hover:text-white">Tax Calculator</a>
                                <a href="/budget-planner.html" className="text-gold hover:text-white">Budget Planner</a>
                                <a href="/vat-calculator.html" className="text-gold hover:text-white">VAT Calculator</a>
                                <a href="/articles.html" className="text-gold hover:text-white">Articles</a>
                                <button
                                    onClick={function() { setDarkMode(!darkMode); }}
                                    className="p-2 rounded-full bg-gray-200 dark:bg-charcoal text-deep-purple dark:text-gold"
                                    aria-label="Toggle dark mode"
                                >
                                    {darkMode ? '☀️' : '🌙'}
                                </button>
                            </div>
                        </nav>
                    </header>

                    {/* Main Content */}
                    <div className="container mx-auto px-4 py-16">
                        <h1 className="text-3xl font-bold text-gold mb-8 text-center">TaxWise Navigator</h1>
                        <div className="max-w-2xl mx-auto bg-white dark:bg-charcoal-light p-6 rounded-lg shadow-md">
                            {/* Tax Form */}
                            {!showResults && (
                                <div>
                                    <h2 className="text-2xl font-semibold text-gold mb-4">Enter Your Tax Details</h2>
                                    {/* Income Details */}
                                    <h3 className="text-lg font-semibold text-gold mb-2">Income Details</h3>
                                    <div className="mb-4">
                                        <label htmlFor="monthlySalary" className="block text-gray-600 dark:text-light-gray mb-2">Monthly Basic Salary (ZAR)</label>
                                        <input
                                            type="number"
                                            id="monthlySalary"
                                            value={taxData.monthlySalary}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { monthlySalary: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter monthly salary"
                                            aria-label="Monthly basic salary in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="travelAllowance" className="block text-gray-600 dark:text-light-gray mb-2">Travel Allowance (ZAR)</label>
                                        <input
                                            type="number"
                                            id="travelAllowance"
                                            value={taxData.travelAllowance}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { travelAllowance: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter travel allowance"
                                            aria-label="Travel allowance in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="housingAllowance" className="block text-gray-600 dark:text-light-gray mb-2">Housing Allowance (ZAR)</label>
                                        <input
                                            type="number"
                                            id="housingAllowance"
                                            value={taxData.housingAllowance}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { housingAllowance: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter housing allowance"
                                            aria-label="Housing allowance in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="employerMedical" className="block text-gray-600 dark:text-light-gray mb-2">Employer Medical Aid Contribution (ZAR)</label>
                                        <input
                                            type="number"
                                            id="employerMedical"
                                            value={taxData.employerMedical}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { employerMedical: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter employer contribution"
                                            aria-label="Employer medical aid contribution in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="otherIncome" className="block text-gray-600 dark:text-light-gray mb-2">Other Income (ZAR)</label>
                                        <input
                                            type="number"
                                            id="otherIncome"
                                            value={taxData.otherIncome}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { otherIncome: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter other income"
                                            aria-label="Other income in ZAR"
                                        />
                                    </div>
                                    {/* Deductions & Expenses */}
                                    <h3 className="text-lg font-semibold text-gold mb-2 mt-6">Deductions & Expenses</h3>
                                    <div className="mb-4">
                                        <label htmlFor="pension" className="block text-gray-600 dark:text-light-gray mb-2">Pension Contributions (ZAR)</label>
                                        <input
                                            type="number"
                                            id="pension"
                                            value={taxData.pension}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { pension: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter pension contributions"
                                            aria-label="Pension contributions in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="provident" className="block text-gray-600 dark:text-light-gray mb-2">Provident Fund Contributions (ZAR)</label>
                                        <input
                                            type="number"
                                            id="provident"
                                            value={taxData.provident}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { provident: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter provident contributions"
                                            aria-label="Provident fund contributions in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="retirementAnnuity" className="block text-gray-600 dark:text-light-gray mb-2">Retirement Annuity Contributions (ZAR)</label>
                                        <input
                                            type="number"
                                            id="retirementAnnuity"
                                            value={taxData.retirementAnnuity}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { retirementAnnuity: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter retirement annuity contributions"
                                            aria-label="Retirement annuity contributions in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="dependents" className="block text-gray-600 dark:text-light-gray mb-2">Number of Medical Aid Dependents</label>
                                        <input
                                            type="number"
                                            id="dependents"
                                            value={taxData.dependents}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { dependents: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter number of dependents"
                                            aria-label="Number of medical aid dependents"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="employeeMedical" className="block text-gray-600 dark:text-light-gray mb-2">Employee Medical Aid Contribution (ZAR)</label>
                                        <input
                                            type="number"
                                            id="employeeMedical"
                                            value={taxData.employeeMedical}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { employeeMedical: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter your contribution"
                                            aria-label="Employee medical aid contribution in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="medicalExpenses" className="block text-gray-600 dark:text-light-gray mb-2">Out-of-Pocket Medical Expenses (ZAR)</label>
                                        <input
                                            type="number"
                                            id="medicalExpenses"
                                            value={taxData.medicalExpenses}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { medicalExpenses: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter medical expenses"
                                            aria-label="Out-of-pocket medical expenses in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="donations" className="block text-gray-600 dark:text-light-gray mb-2">Donations to PBOs (ZAR)</label>
                                        <input
                                            type="number"
                                            id="donations"
                                            value={taxData.donations}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { donations: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter donations"
                                            aria-label="Donations to PBOs in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="ageRange" className="block text-gray-600 dark:text-light-gray mb-2">Your Age Range</label>
                                        <select
                                            id="ageRange"
                                            value={taxData.ageRange}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { ageRange: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            aria-label="Select your age range"
                                        >
                                            <option value="under65">Under 65</option>
                                            <option value="65to74">65 to under 75</option>
                                            <option value="75plus">75 and older</option>
                                        </select>
                                    </div>
                                    <div className="mb-4">
                                        <label className="flex items-center text-gray-600 dark:text-light-gray">
                                            <input
                                                type="checkbox"
                                                checked={taxData.workFromHome}
                                                onChange={function(e) { setTaxData(Object.assign({}, taxData, { workFromHome: e.target.checked })); }}
                                                className="mr-2"
                                                aria-label="I work from home"
                                            />
                                            I work from home
                                        </label>
                                    </div>
                                    <div className="mb-4">
                                        <label className="flex items-center text-gray-600 dark:text-light-gray">
                                            <input
                                                type="checkbox"
                                                checked={taxData.claimTravel}
                                                onChange={function(e) { setTaxData(Object.assign({}, taxData, { claimTravel: e.target.checked })); }}
                                                className="mr-2"
                                                aria-label="I want to claim travel expenses"
                                            />
                                            I want to claim travel expenses
                                        </label>
                                    </div>
                                    {/* Capital Gains Tax Estimator */}
                                    <h3 className="text-lg font-semibold text-gold mb-2 mt-6">Capital Gains Tax Estimator</h3>
                                    <div className="mb-4">
                                        <label htmlFor="purchasePrice" className="block text-gray-600 dark:text-light-gray mb-2">Purchase Price (ZAR)</label>
                                        <input
                                            type="number"
                                            id="purchasePrice"
                                            value={taxData.purchasePrice}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { purchasePrice: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter purchase price"
                                            aria-label="Purchase price in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="sellingPrice" className="block text-gray-600 dark:text-light-gray mb-2">Selling Price (ZAR)</label>
                                        <input
                                            type="number"
                                            id="sellingPrice"
                                            value={taxData.sellingPrice}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { sellingPrice: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter selling price"
                                            aria-label="Selling price in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="allowableExpenses" className="block text-gray-600 dark:text-light-gray mb-2">Allowable Expenses (ZAR)</label>
                                        <input
                                            type="number"
                                            id="allowableExpenses"
                                            value={taxData.allowableExpenses}
                                            onChange={function(e) { setTaxData(Object.assign({}, taxData, { allowableExpenses: e.target.value })); }}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter allowable expenses"
                                            aria-label="Allowable expenses in ZAR"
                                        />
                                    </div>
                                    <button
                                        onClick={calculateTax}
                                        className="w-full px-4 py-2 bg-deep-purple text-white rounded hover:bg-gold"
                                        aria-label="Calculate tax"
                                    >
                                        Calculate Tax
                                    </button>
                                </div>
                            )}

                            {/* Results */}
                            {showResults && (
                                <div>
                                    <h2 className="text-2xl font-semibold text-gold mb-4">Your Tax Breakdown</h2>
                                    <div className="mb-6">
                                        <h3 className="text-lg font-semibold text-gold mb-2">Summary</h3>
                                        <p className="text-gray-600 dark:text-light-gray">Total Income: R {showResults.totalIncome.toFixed(2)}</p>
                                        <p className="text-gray-600 dark:text-light-gray">Taxable Income: R {showResults.taxableIncome.toFixed(2)}</p>
                                        <p className="text-gray-600 dark:text-light-gray">Home Office Deduction: R {showResults.homeOfficeDeduction.toFixed(2)}</p>
                                        <p className="text-gray-600 dark:text-light-gray">Travel Expense Deduction: R {showResults.travelDeduction.toFixed(2)}</p>
                                        <p className="text-gray-600 dark:text-light-gray">Tax Before Rebates: R {showResults.taxBeforeRebates.toFixed(2)}</p>
                                        <p className="text-gray-600 dark:text-light-gray">Total Rebates: R {showResults.totalRebate.toFixed(2)}</p>
                                        <p className="text-gray-600 dark:text-light-gray">Medical Tax Credits: R {showResults.medicalCredit.toFixed(2)}</p>
                                        <p className="text-gold font-semibold">Final Income Tax Payable: R {showResults.finalTax.toFixed(2)}</p>
                                        {showResults.taxableCapitalGain > 0 && (
                                            <p className="text-gray-600 dark:text-light-gray">Capital Gains Tax Included: R {showResults.capitalGainsTax.toFixed(2)}</p>
                                        )}
                                        <p className="text-gray-600 dark:text-light-gray">Effective Tax Rate: {showResults.effectiveTaxRate}%</p>
                                        <p className="text-sm text-gray-600 dark:text-light-gray mt-2">
                                            Note: No tax is owed if your income is below R {showResults.threshold.toLocaleString()} based on your age range.
                                        </p>
                                        <p className="text-sm text-gray-600 dark:text-light-gray mt-2">
                                            Home office and travel deductions are estimates. Verify with SARS for specific rules (e.g., home office expenses, travel logbook).
                                        </p>
                                    </div>
                                    <div className="mb-6">
                                        <h3 className="text-lg font-semibold text-gold mb-2">Tax Breakdown Visualization</h3>
                                        <canvas ref={chartRef} className="w-full"></canvas>
                                    </div>
                                    <div className="mb-6 text-sm text-gray-600 dark:text-light-gray">
                                        <p><strong>Tip:</strong> Maximize deductions like retirement contributions (up to 27.5%, max R350,000) and donations (up to 10%). Verify results with SARS for accuracy.</p>
                                    </div>
                                    <button
                                        onClick={function() { setShowResults(false); }}
                                        className="w-full px-4 py-2 bg-gray-300 dark:bg-charcoal rounded hover:bg-gold hover:text-white"
                                        aria-label="Edit inputs"
                                    >
                                        Edit Inputs
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<TaxCalculator />, document.getElementById('root'));
    </script>
</body>
</html>
