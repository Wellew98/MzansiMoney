<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MzansiMoney - TaxWise Navigator</title>
    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
    <!-- React CDNs -->
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js" crossorigin></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.23.4/babel.min.js"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        h1, h2, h3 {
            font-family: 'Poppins', sans-serif;
        }
        .bg-deep-purple { background-color: #4A148C; }
        .text-deep-purple { color: #4A148C; }
        .bg-gold { background-color: #FFD700; }
        .text-gold { color: #FFD700; }
        .bg-green { background-color: #2E7D32; }
        .text-green { color: #2E7D32; }
        .border-green { border-color: #2E7D32; }
        .bg-charcoal { background-color: #212121; }
        .bg-charcoal-light { background-color: #333333; }
        .text-light-gray { color: #E0E0E0; }
        body { background-color: #F5F5F5; }
        body.dark {
            background-color: #212121;
        }
        body.dark .text-gray-600 { color: #E0E0E0; }
        body.dark .text-gray-800 { color: #E0E0E0; }
        body.dark .bg-white { background-color: #333333; }
        body.dark .text-deep-purple { color: #FFD700; }
        body.dark canvas { background-color: #333333; }
        .hover\:text-gold:hover { color: #FFD700; }
        .hover\:bg-gold:hover { background-color: #FFD700; color: #FFFFFF; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        function TaxCalculator() {
            const [darkMode, setDarkMode] = useState(true);
            const [taxData, setTaxData] = useState({
                monthlySalary: '',
                hasTravelAllowance: 'no',
                travelAllowance: '',
                housingAllowance: '',
                employerMedical: '',
                otherIncome: '',
                hasSalaryContributions: 'no',
                salaryContributions: '',
                hasPrivateContributions: 'no',
                privateContributions: '',
                dependents: '',
                employeeMedical: '',
                medicalExpenses: '',
                donations: '',
                workFromHome: false,
                homeOfficeDeductionAmount: '',
                claimTravel: false,
                travelDeductionAmount: '',
                purchasePrice: '',
                sellingPrice: '',
                allowableExpenses: '',
                ageRange: 'under65'
            });
            const [showResults, setShowResults] = useState(false);
            const chartRef = useRef(null);
            const chartInstance = useRef(null);

            useEffect(() => {
                document.body.classList.toggle('dark', darkMode);
            }, [darkMode]);

            useEffect(() => {
                if (showResults && chartRef.current) {
                    if (chartInstance.current) {
                        chartInstance.current.destroy();
                    }
                    const ctx = chartRef.current.getContext('2d');
                    chartInstance.current = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: [
                                'Total Income',
                                'Taxable Income',
                                'Tax Before Rebates',
                                'Rebates',
                                'Medical Credits',
                                showResults.homeOfficeDeduction > 0 ? 'Home Office Deduction' : null,
                                showResults.travelDeduction > 0 ? 'Travel Deduction' : null,
                                showResults.taxableCapitalGain > 0 ? 'Capital Gains Tax' : null,
                                'Final Tax'
                            ].filter(label => label),
                            datasets: [{
                                label: 'Tax Breakdown (ZAR)',
                                data: [
                                    showResults.totalIncome,
                                    showResults.taxableIncome,
                                    showResults.taxBeforeRebates,
                                    showResults.totalRebate,
                                    showResults.medicalCredit,
                                    showResults.homeOfficeDeduction > 0 ? showResults.homeOfficeDeduction : null,
                                    showResults.travelDeduction > 0 ? showResults.travelDeduction : null,
                                    showResults.taxableCapitalGain > 0 ? showResults.capitalGainsTax : null,
                                    showResults.finalTax
                                ].filter(data => data !== null),
                                backgroundColor: [
                                    '#808080',
                                    '#808080',
                                    '#4A148C',
                                    '#FFD700',
                                    '#2E7D32',
                                    '#2E7D32',
                                    '#2E7D32',
                                    '#4A148C',
                                    '#4A148C'
                                ].slice(0, showResults.taxableCapitalGain > 0 ? 9 : (showResults.homeOfficeDeduction > 0 || showResults.travelDeduction > 0) ? 7 : 5)
                            }]
                        },
                        options: {
                            indexAxis: 'y',
                            scales: {
                                x: {
                                    beginAtZero: true,
                                    title: { display: true, text: 'Amount (ZAR)', color: darkMode ? '#E0E0E0' : '#000000' },
                                    ticks: { color: darkMode ? '#E0E0E0' : '#000000' }
                                },
                                y: {
                                    ticks: { color: darkMode ? '#E0E0E0' : '#000000' }
                                }
                            },
                            plugins: {
                                legend: { display: false },
                                tooltip: {
                                    callbacks: {
                                        label: (context) => `R ${context.parsed.x.toFixed(2)}`
                                    }
                                }
                            }
                        }
                    });
                }
                return () => {
                    if (chartInstance.current) {
                        chartInstance.current.destroy();
                    }
                };
            }, [showResults, darkMode]);

            const calculateTax = () => {
                try {
                    // Income
                    const monthlySalary = parseFloat(taxData.monthlySalary) || 0;
                    const travelAllowance = parseFloat(taxData.travelAllowance) || 0;
                    const housingAllowance = parseFloat(taxData.housingAllowance) || 0;
                    const employerMedical = parseFloat(taxData.employerMedical) || 0;
                    const otherIncome = parseFloat(taxData.otherIncome) || 0;
                    const totalIncome = (monthlySalary * 12) + travelAllowance + housingAllowance + employerMedical + otherIncome;

                    // Deductions
                    const salaryContributions = parseFloat(taxData.salaryContributions) || 0;
                    const privateContributions = parseFloat(taxData.privateContributions) || 0;
                    const donations = parseFloat(taxData.donations) || 0;
                    const workFromHome = taxData.workFromHome;
                    const claimTravel = taxData.claimTravel;
                    const homeOfficeDeduction = workFromHome ? (parseFloat(taxData.homeOfficeDeductionAmount) || 0) : 0;
                    const travelDeduction = claimTravel ? (parseFloat(taxData.travelDeductionAmount) || 0) : 0;

                    const retirementTotal = salaryContributions + privateContributions;
                    const maxRetirementDeduction = Math.min(retirementTotal, totalIncome * 0.275, 350000);
                    const maxDonationsDeduction = Math.min(donations, totalIncome * 0.1);

                    // Capital Gains
                    const purchasePrice = parseFloat(taxData.purchasePrice) || 0;
                    const sellingPrice = parseFloat(taxData.sellingPrice) || 0;
                    const allowableExpenses = parseFloat(taxData.allowableExpenses) || 0;
                    const capitalGain = sellingPrice - purchasePrice - allowableExpenses;
                    const taxableCapitalGain = Math.max(0, capitalGain - 40000) * 0.4;

                    // Taxable Income
                    const taxableIncome = Math.max(0, totalIncome - maxRetirementDeduction - maxDonationsDeduction - homeOfficeDeduction - travelDeduction) + taxableCapitalGain;

                    // SARS 2025/26 Tax Brackets (projected)
                    let tax = 0;
                    if (taxableIncome > 1904300) {
                        tax = 675054 + (taxableIncome - 1904300) * 0.45;
                    } else if (taxableIncome > 717100) {
                        tax = 211260 + (taxableIncome - 717100) * 0.41;
                    } else if (taxableIncome > 536700) {
                        tax = 136157 + (taxableIncome - 536700) * 0.36;
                    } else if (taxableIncome > 388100) {
                        tax = 81161 + (taxableIncome - 388100) * 0.31;
                    } else if (taxableIncome > 248500) {
                        tax = 44726 + (taxableIncome - 248500) * 0.26;
                    } else if (taxableIncome > 0) {
                        tax = taxableIncome * 0.18;
                    }

                    // Rebates
                    const primaryRebate = 18063;
                    const secondaryRebate = taxData.ageRange !== 'under65' ? 9900 : 0;
                    const tertiaryRebate = taxData.ageRange === '75plus' ? 3294 : 0;
                    const totalRebate = primaryRebate + secondaryRebate + tertiaryRebate;

                    // Medical Credits
                    const dependents = parseInt(taxData.dependents) || 0;
                    const employeeMedical = parseFloat(taxData.employeeMedical) || 0;
                    const medicalExpenses = parseFloat(taxData.medicalExpenses) || 0;
                    let medicalCredit = 0;
                    if (dependents >= 2) {
                        medicalCredit = (364 * 2 + 246 * (dependents - 2)) * 12;
                    } else if (dependents === 1) {
                        medicalCredit = 364 * 12;
                    }
                    medicalCredit += employeeMedical + medicalExpenses;

                    // Final Tax
                    const taxBeforeRebates = tax;
                    tax = Math.max(0, tax - totalRebate);
                    const finalTax = Math.max(0, tax - medicalCredit);
                    const capitalGainsTax = taxableCapitalGain > 0 ? (finalTax - Math.max(0, taxBeforeRebates - totalRebate - medicalCredit)) : 0;
                    const effectiveTaxRate = taxableIncome > 0 ? (finalTax / taxableIncome * 100).toFixed(2) : 0;

                    // Threshold
                    const threshold = taxData.ageRange === 'under65' ? 100350 : taxData.ageRange === '65to74' ? 155100 : 173600;

                    setShowResults({
                        totalIncome,
                        taxableIncome,
                        taxBeforeRebates,
                        totalRebate,
                        medicalCredit,
                        finalTax,
                        capitalGainsTax,
                        effectiveTaxRate,
                        threshold,
                        taxableCapitalGain,
                        homeOfficeDeduction,
                        travelDeduction
                    });
                } catch (error) {
                    console.error('Calculation error:', error);
                    alert('An error occurred during calculation. Please check your inputs and try again.');
                }
            };

            return (
                <div className="min-h-screen">
                    <header className="sticky top-0 z-50 bg-deep-purple shadow-md">
                        <nav className="container mx-auto px-4 py-4 flex justify-between items-center">
                            <div className="text-2xl font-bold text-white">
                                <a href="/index.html">MzansiMoney</a>
                            </div>
                            <div className="space-x-6 flex items-center">
                                <a href="/index.html#home" className="text-gold hover:text-white">Home</a>
                                <a href="/income-tax.html" className="text-gold hover:text-white">Tax Calculator</a>
                                <a href="/budget-planner.html" className="text-gold hover:text-white">Budget Planner</a>
                                <a href="/vat-calculator.html" className="text-gold hover:text-white">VAT Calculator</a>
                                <a href="/articles.html" className="text-gold hover:text-white">Articles</a>
                                <button
                                    onClick={() => setDarkMode(!darkMode)}
                                    className="p-2 rounded-full bg-gray-200 dark:bg-charcoal text-deep-purple dark:text-gold"
                                    aria-label="Toggle dark mode"
                                >
                                    {darkMode ? '‚òÄÔ∏è' : 'üåô'}
                                </button>
                            </div>
                        </nav>
                    </header>
                    <div className="container mx-auto px-4 py-16">
                        <h1 className="text-3xl font-bold text-gold mb-8 text-center">TaxWise Navigator</h1>
                        <div className="max-w-2xl mx-auto bg-white dark:bg-charcoal-light p-6 rounded-lg shadow-md">
                            {!showResults ? (
                                <div>
                                    <h2 className="text-2xl font-semibold text-gold mb-4">Enter Your Tax Details</h2>
                                    <h3 className="text-lg font-semibold text-gold mb-2">Income Details</h3>
                                    <div className="mb-4">
                                        <label htmlFor="monthlySalary" className="block text-gray-600 dark:text-light-gray mb-2">Monthly Basic Salary (ZAR)</label>
                                        <input
                                            type="number"
                                            id="monthlySalary"
                                            value={taxData.monthlySalary}
                                            onChange={(e) => setTaxData({ ...taxData, monthlySalary: e.target.value })}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter monthly salary"
                                            aria-label="Monthly basic salary in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label className="block text-gray-600 dark:text-light-gray mb-2">Does your salary include money for a travel allowance?</label>
                                        <div className="flex space-x-4">
                                            <label className="flex items-center text-gray-600 dark:text-light-gray">
                                                <input
                                                    type="radio"
                                                    name="hasTravelAllowance"
                                                    value="yes"
                                                    checked={taxData.hasTravelAllowance === 'yes'}
                                                    onChange={(e) => setTaxData({ ...taxData, hasTravelAllowance: e.target.value })}
                                                    className="mr-2"
                                                    aria-label="Travel allowance yes"
                                                />
                                                Yes
                                            </label>
                                            <label className="flex items-center text-gray-600 dark:text-light-gray">
                                                <input
                                                    type="radio"
                                                    name="hasTravelAllowance"
                                                    value="no"
                                                    checked={taxData.hasTravelAllowance === 'no'}
                                                    onChange={(e) => setTaxData({ ...taxData, hasTravelAllowance: e.target.value, travelAllowance: '' })}
                                                    className="mr-2"
                                                    aria-label="Travel allowance no"
                                                />
                                                No
                                            </label>
                                        </div>
                                        {taxData.hasTravelAllowance === 'yes' && (
                                            <div className="mt-2">
                                                <label htmlFor="travelAllowance" className="block text-gray-600 dark:text-light-gray mb-2">Please enter the amount (ZAR)</label>
                                                <input
                                                    type="number"
                                                    id="travelAllowance"
                                                    value={taxData.travelAllowance}
                                                    onChange={(e) => setTaxData({ ...taxData, travelAllowance: e.target.value })}
                                                    className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                                    placeholder="Enter travel allowance"
                                                    aria-label="Travel allowance amount in ZAR"
                                                />
                                            </div>
                                        )}
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="housingAllowance" className="block text-gray-600 dark:text-light-gray mb-2">Housing Allowance (ZAR)</label>
                                        <input
                                            type="number"
                                            id="housingAllowance"
                                            value={taxData.housingAllowance}
                                            onChange={(e) => setTaxData({ ...taxData, housingAllowance: e.target.value })}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter housing allowance"
                                            aria-label="Housing allowance in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="employerMedical" className="block text-gray-600 dark:text-light-gray mb-2">Employer Medical Aid Contribution (ZAR)</label>
                                        <input
                                            type="number"
                                            id="employerMedical"
                                            value={taxData.employerMedical}
                                            onChange={(e) => setTaxData({ ...taxData, employerMedical: e.target.value })}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter employer contribution"
                                            aria-label="Employer medical aid contribution in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="otherIncome" className="block text-gray-600 dark:text-light-gray mb-2">Other Income (ZAR)</label>
                                        <input
                                            type="number"
                                            id="otherIncome"
                                            value={taxData.otherIncome}
                                            onChange={(e) => setTaxData({ ...taxData, otherIncome: e.target.value })}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter other income"
                                            aria-label="Other income in ZAR"
                                        />
                                    </div>
                                    <h3 className="text-lg font-semibold text-gold mb-2 mt-6">Deductions & Expenses</h3>
                                    <div className="mb-4">
                                        <label className="block text-gray-600 dark:text-light-gray mb-2">Does your salary include contributions to a pension, provident fund, or RAF?</label>
                                        <div className="flex space-x-4">
                                            <label className="flex items-center text-gray-600 dark:text-light-gray">
                                                <input
                                                    type="radio"
                                                    name="hasSalaryContributions"
                                                    value="yes"
                                                    checked={taxData.hasSalaryContributions === 'yes'}
                                                    onChange={(e) => setTaxData({ ...taxData, hasSalaryContributions: e.target.value })}
                                                    className="mr-2"
                                                    aria-label="Salary contributions yes"
                                                />
                                                Yes
                                            </label>
                                            <label className="flex items-center text-gray-600 dark:text-light-gray">
                                                <input
                                                    type="radio"
                                                    name="hasSalaryContributions"
                                                    value="no"
                                                    checked={taxData.hasSalaryContributions === 'no'}
                                                    onChange={(e) => setTaxData({ ...taxData, hasSalaryContributions: e.target.value, salaryContributions: '' })}
                                                    className="mr-2"
                                                    aria-label="Salary contributions no"
                                                />
                                                No
                                            </label>
                                        </div>
                                        {taxData.hasSalaryContributions === 'yes' && (
                                            <div className="mt-2">
                                                <label htmlFor="salaryContributions" className="block text-gray-600 dark:text-light-gray mb-2">Please enter the total amount (ZAR)</label>
                                                <input
                                                    type="number"
                                                    id="salaryContributions"
                                                    value={taxData.salaryContributions}
                                                    onChange={(e) => setTaxData({ ...taxData, salaryContributions: e.target.value })}
                                                    className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                                    placeholder="Enter total contributions"
                                                    aria-label="Salary contributions amount in ZAR"
                                                />
                                            </div>
                                        )}
                                    </div>
                                    <div className="mb-4">
                                        <label className="block text-gray-600 dark:text-light-gray mb-2">Do you pay private contributions to a pension, provident fund, or RAF?</label>
                                        <div className="flex space-x-4">
                                            <label className="flex items-center text-gray-600 dark:text-light-gray">
                                                <input
                                                    type="radio"
                                                    name="hasPrivateContributions"
                                                    value="yes"
                                                    checked={taxData.hasPrivateContributions === 'yes'}
                                                    onChange={(e) => setTaxData({ ...taxData, hasPrivateContributions: e.target.value })}
                                                    className="mr-2"
                                                    aria-label="Private contributions yes"
                                                />
                                                Yes
                                            </label>
                                            <label className="flex items-center text-gray-600 dark:text-light-gray">
                                                <input
                                                    type="radio"
                                                    name="hasPrivateContributions"
                                                    value="no"
                                                    checked={taxData.hasPrivateContributions === 'no'}
                                                    onChange={(e) => setTaxData({ ...taxData, hasPrivateContributions: e.target.value, privateContributions: '' })}
                                                    className="mr-2"
                                                    aria-label="Private contributions no"
                                                />
                                                No
                                            </label>
                                        </div>
                                        {taxData.hasPrivateContributions === 'yes' && (
                                            <div className="mt-2">
                                                <label htmlFor="privateContributions" className="block text-gray-600 dark:text-light-gray mb-2">Please enter the total amount (ZAR)</label>
                                                <input
                                                    type="number"
                                                    id="privateContributions"
                                                    value={taxData.privateContributions}
                                                    onChange={(e) => setTaxData({ ...taxData, privateContributions: e.target.value })}
                                                    className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                                    placeholder="Enter total contributions"
                                                    aria-label="Private contributions amount in ZAR"
                                                />
                                            </div>
                                        )}
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="dependents" className="block text-gray-600 dark:text-light-gray mb-2">Number of Medical Aid Dependents</label>
                                        <input
                                            type="number"
                                            id="dependents"
                                            value={taxData.dependents}
                                            onChange={(e) => setTaxData({ ...taxData, dependents: e.target.value })}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter number of dependents"
                                            aria-label="Number of medical aid dependents"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="employeeMedical" className="block text-gray-600 dark:text-light-gray mb-2">Employee Medical Aid Contribution (ZAR)</label>
                                        <input
                                            type="number"
                                            id="employeeMedical"
                                            value={taxData.employeeMedical}
                                            onChange={(e) => setTaxData({ ...taxData, employeeMedical: e.target.value })}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter your contribution"
                                            aria-label="Employee medical aid contribution in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="medicalExpenses" className="block text-gray-600 dark:text-light-gray mb-2">Out-of-Pocket Medical Expenses (ZAR)</label>
                                        <input
                                            type="number"
                                            id="medicalExpenses"
                                            value={taxData.medicalExpenses}
                                            onChange={(e) => setTaxData({ ...taxData, medicalExpenses: e.target.value })}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter medical expenses"
                                            aria-label="Out-of-pocket medical expenses in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="donations" className="block text-gray-600 dark:text-light-gray mb-2">Donations to PBOs (ZAR)</label>
                                        <input
                                            type="number"
                                            id="donations"
                                            value={taxData.donations}
                                            onChange={(e) => setTaxData({ ...taxData, donations: e.target.value })}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter donations"
                                            aria-label="Donations to PBOs in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="ageRange" className="block text-gray-600 dark:text-light-gray mb-2">Your Age Range</label>
                                        <select
                                            id="ageRange"
                                            value={taxData.ageRange}
                                            onChange={(e) => setTaxData({ ...taxData, ageRange: e.target.value })}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            aria-label="Select your age range"
                                        >
                                            <option value="under65">Under 65</option>
                                            <option value="65to74">65 to under 75</option>
                                            <option value="75plus">75 and older</option>
                                        </select>
                                    </div>
                                    <div className="mb-4">
                                        <label className="flex items-center text-gray-600 dark:text-light-gray">
                                            <input
                                                type="checkbox"
                                                checked={taxData.workFromHome}
                                                onChange={(e) => setTaxData({ ...taxData, workFromHome: e.target.checked, homeOfficeDeductionAmount: e.target.checked ? taxData.homeOfficeDeductionAmount : '' })}
                                                className="mr-2"
                                                aria-label="I work from home"
                                            />
                                            I work from home
                                        </label>
                                        {taxData.workFromHome && (
                                            <div className="mt-2">
                                                <label htmlFor="homeOfficeDeductionAmount" className="block text-gray-600 dark:text-light-gray mb-2">Enter home office deduction amount (ZAR)</label>
                                                <input
                                                    type="number"
                                                    id="homeOfficeDeductionAmount"
                                                    value={taxData.homeOfficeDeductionAmount}
                                                    onChange={(e) => setTaxData({ ...taxData, homeOfficeDeductionAmount: e.target.value })}
                                                    className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                                    placeholder="Enter deduction amount"
                                                    aria-label="Home office deduction amount in ZAR"
                                                />
                                            </div>
                                        )}
                                    </div>
                                    <div className="mb-4">
                                        <label className="flex items-center text-gray-600 dark:text-light-gray">
                                            <input
                                                type="checkbox"
                                                checked={taxData.claimTravel}
                                                onChange={(e) => setTaxData({ ...taxData, claimTravel: e.target.checked, travelDeductionAmount: e.target.checked ? taxData.travelDeductionAmount : '' })}
                                                className="mr-2"
                                                aria-label="I want to claim travel expenses"
                                            />
                                            I want to claim travel expenses
                                        </label>
                                        {taxData.claimTravel && (
                                            <div className="mt-2">
                                                <label htmlFor="travelDeductionAmount" className="block text-gray-600 dark:text-light-gray mb-2">Enter travel expense deduction amount (ZAR)</label>
                                                <input
                                                    type="number"
                                                    id="travelDeductionAmount"
                                                    value={taxData.travelDeductionAmount}
                                                    onChange={(e) => setTaxData({ ...taxData, travelDeductionAmount: e.target.value })}
                                                    className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                                    placeholder="Enter deduction amount"
                                                    aria-label="Travel expense deduction amount in ZAR"
                                                />
                                            </div>
                                        )}
                                    </div>
                                    <h3 className="text-lg font-semibold text-gold mb-2 mt-6">Capital Gains Tax Estimator</h3>
                                    <div className="mb-4">
                                        <label htmlFor="purchasePrice" className="block text-gray-600 dark:text-light-gray mb-2">Purchase Price (ZAR)</label>
                                        <input
                                            type="number"
                                            id="purchasePrice"
                                            value={taxData.purchasePrice}
                                            onChange={(e) => setTaxData({ ...taxData, purchasePrice: e.target.value })}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter purchase price"
                                            aria-label="Purchase price in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="sellingPrice" className="block text-gray-600 dark:text-light-gray mb-2">Selling Price (ZAR)</label>
                                        <input
                                            type="number"
                                            id="sellingPrice"
                                            value={taxData.sellingPrice}
                                            onChange={(e) => setTaxData({ ...taxData, sellingPrice: e.target.value })}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter selling price"
                                            aria-label="Selling price in ZAR"
                                        />
                                    </div>
                                    <div className="mb-4">
                                        <label htmlFor="allowableExpenses" className="block text-gray-600 dark:text-light-gray mb-2">Allowable Expenses (ZAR)</label>
                                        <input
                                            type="number"
                                            id="allowableExpenses"
                                            value={taxData.allowableExpenses}
                                            onChange={(e) => setTaxData({ ...taxData, allowableExpenses: e.target.value })}
                                            className="w-full p-2 border border-green rounded dark:bg-charcoal dark:text-light-gray dark:border-green"
                                            placeholder="Enter allowable expenses"
                                            aria-label="Allowable expenses in ZAR"
                                        />
                                    </div>
                                    <button
                                        onClick={calculateTax}
                                        className="w-full px-4 py-2 bg-deep-purple text-white rounded hover:bg-gold"
                                        aria-label="Calculate tax"
                                    >
                                        Calculate Tax
                                    </button>
                                </div>
                            ) : (
                                <div>
                                    <h2 className="text-2xl font-semibold text-gold mb-4">Your Tax Breakdown</h2>
                                    <div className="mb-6">
                                        <h3 className="text-lg font-semibold text-gold mb-2">Summary</h3>
                                        <p className="text-gray-600 dark:text-light-gray">Total Income: R {showResults.totalIncome.toFixed(2)}</p>
                                        <p className="text-gray-600 dark:text-light-gray">Taxable Income: R {showResults.taxableIncome.toFixed(2)}</p>
                                        <p className="text-gray-600 dark:text-light-gray">Home Office Deduction: R {showResults.homeOfficeDeduction.toFixed(2)}</p>
                                        <p className="text-gray-600 dark:text-light-gray">Travel Expense Deduction: R {showResults.travelDeduction.toFixed(2)}</p>
                                        <p className="text-gray-600 dark:text-light-gray">Tax Before Rebates: R {showResults.taxBeforeRebates.toFixed(2)}</p>
                                        <p className="text-gray-600 dark:text-light-gray">Total Rebates: R {showResults.totalRebate.toFixed(2)}</p>
                                        <p className="text-gray-600 dark:text-light-gray">Medical Tax Credits: R {showResults.medicalCredit.toFixed(2)}</p>
                                        <p className="text-gold font-semibold">Final Income Tax Payable: R {showResults.finalTax.toFixed(2)}</p>
                                        {showResults.taxableCapitalGain > 0 && (
                                            <p className="text-gray-600 dark:text-light-gray">Capital Gains Tax Included: R {showResults.capitalGainsTax.toFixed(2)}</p>
                                        )}
                                        <p className="text-gray-600 dark:text-light-gray">Effective Tax Rate: {showResults.effectiveTaxRate}%</p>
                                        <p className="text-sm text-gray-600 dark:text-light-gray mt-2">
                                            Note: No tax is owed if your income is below R {showResults.threshold.toLocaleString()} based on your age range.
                                        </p>
                                        <p className="text-sm text-gray-600 dark:text-light-gray mt-2">
                                            Home office and travel deductions are estimates. Verify with SARS for specific rules (e.g., home office expenses, travel logbook).
                                        </p>
                                    </div>
                                    <div className="mb-6">
                                        <h3 className="text-lg font-semibold text-gold mb-2">Tax Breakdown Visualization</h3>
                                        <canvas ref={chartRef} className="w-full"></canvas>
                                    </div>
                                    <div className="mb-6 text-sm text-gray-600 dark:text-light-gray">
                                        <p><strong>Tip:</strong> Maximize deductions like retirement contributions (up to 27.5%, max R350,000) and donations (up to 10%). Verify results with SARS for accuracy.</p>
                                    </div>
                                    <button
                                        onClick={() => setShowResults(false)}
                                        className="w-full px-4 py-2 bg-gray-300 dark:bg-charcoal rounded hover:bg-gold hover:text-white"
                                        aria-label="Edit inputs"
                                    >
                                        Edit Inputs
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                    <footer className="bg-white dark:bg-charcoal-light py-4 text-center">
                        <p className="text-gray-600 dark:text-light-gray text-sm">
                            ¬© 2025 MzansiMoney | All Rights Reserved | <a href="/privacy.html" className="text-green hover:text-gold">Privacy Policy</a>
                        </p>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<TaxCalculator />, document.getElementById('root'));
    </script>
</body>
</html>
